sudo: required
language: python
env:
  global:
  - APP_ENV=development
  - DB_HOST=mysql
  - DB_PORT=3306
  - DB_NAME=yii
  - AWS_DEFAULT_REGION=us-east-1
  - secure: nrj/y+9Z6FqFzfgJ8+arx/Kn9nq5WKLXIn6DBtQ+Qoo2Fc8Yfff2GZq/YMqnxSJaXHrt8xspulaJ24pqpPJvAnOJIY81cID1/Bte7xXy5JtIQwojp8ChhnLKjlUCQ70JFYHGpsd/2tKquqHahQkLTSKL23zgsDbAzRGSj5M/hgoT+9/0She6S3h/mEGxT6Ee0XtwWzqJp5c4lYYImWREF/LyeZJ1bnNc4qfOXw8NtFEhI4LXzYu9pyUp4ZOz69lG5dVvEksBvdZgrS3HtmByBuDhDRI1cCCjKmmWwkvtZPi/qg5qwfNvKCwt4fWT1k9UAKm5Q1s/dR3K5DsiZfINt1XtnFIy5lC9+Ea6Kudnftaw3+BuA384mtT+l0wnVB2I9VxIONd1fAoltsCaV0QVLy3WUp6Z4L2/aYhloYKyqk0ujsUAYaOIwuGBBgrVSXG/Yg1F6GEM7HvkwXO8Qbox9xssutULPARRPvqd+Eqb/+stBRwYcA84LVUfpkiMzAikLioHdzlJtEE1vVcUaalStMww20PqsVH+nIycQFb6EiCnYJ68SPndFl9vOetHWx7vI3TZsq5mfm2FKMkoKyo4QZkaBCXALa86ak9LIampE4/h15bS/g9yvwMmlUur+YrL04CXExvSU3zG9V/spRf6lUCanKJzVUcifnW0JANicSM=
  - secure: deFp5G6Ymk/vPD5AgoVrguh8Oq7Kfq5KfB55Io5z9wgqqOo1rFtbGe/kI3qXgM8n/7LXDQ2sbWifDXP7T9Fo9qc/W/PC5j0ZiFbCshNqgWoot5+vzR+wMLIUv9XAQPMJceqIMATJb+MzBi1wSjbrpJ2VX0VQqkmVgC2dyQZGHE7ZhKp+LVd9+jwh7kdCMxruON/DRex+g7hzNQW7Flrfm4ITJsynw/d5GjupzT2ZnvpHcUTbIFIiM84K24GZtG/9/XL3bj8kx7yiDydP/oyEEpRuogqVftrBQGWw83L7P4EwZiQ04FJsdgRYXF+pB9PwMGHvoxhgusp7nXK1M5r4j4ao8o4xwhgFJZWL1O17wlXBdwRZRSByVoJ445n/w7bd7kND89dvWiaKo0iAot6UEwVSfY9fMKI/Eof5g+iOleLimH6ikW/rNSU/fCWqw6I2s4NwU/RMQYNujuL8YNNHypC0QqFJFE6qCTFAveSMIQWxVcHJcGUj7OZ74Ntw8RgZtwLytzWcfohKdJg+TMUK0M3NCveRf49vj3iOI6gtCBvU1LH/pjCYxphHvcCeZtXqItN9CT0gV1vQaFt7UxBoeb1M9yGUlu8K2+0iahNnaiNpp6ltUT9K5n0tQm+2tbBEjR/6tBrrawNxMUQ4le1F4MOX4NdZXvPKZWjtrAQxEBs=
  - secure: uBmuD+FrSDNtgOGKK6OyzwmACzI2JgJmUsqAq6b9ojsob2sZUXVy7GlWMyVxh442D9xbsRUNRBvnG7tuZdqXyoQQHeHWVv1tYzy8x1Bb82jt/sJ2b4+dYGMsAy0XvChLJlRExB6TM45Xxnjzya2UouN/k8QsnW8TxXankP1IGd+QtyrWOi52GMt0tPlVyoGFknvR/l/q52jLJrjOyU35EAnBkeF13Jorggsh+f6XynUSBuShP9n3yWCuXfeYEY0jLKO0Wdnq9MgHrRjcObtwI3eZK0jLYe7auXcGQcHthydjSG4asfk+EWGeEZd2Pj0MVRA1tQfEEcN4aXv+wKkPEvlGFnDldmyAF1GPGvQRvKaAHZFrlYmUry5IGWkOe3ayqqegl7Q+eM6kR4tT6oBm1zLgz0hZQGGHEhsYU5PIjFpZQyxLkbx185ycuRBZYD2NXRXRo9aOmfB3DTLMmTT10rnwh53eOGyncvAQbja4U5ZkoCSBCFHSTq1H5huoNMgQ61fLbY4Eyia3mP+Ixcfd4BHwLEK9DbISHSko+aSZsSgx/KD2XaheIJJ4xjwosAXxZRvzU8jHmIAYGhLOBNiX6TkCgZVoaKGQbkaKe3jJh1rBWyJ4QShzArm4AqKISOVayerYL8S0PjlXGXapGb6l8toWNhwuABAj85L2DV+z39U=
  - secure: ymNKq8lSRM7h/0sJbMBWdyAGGoKfBjifmVDxWvbV8nZzlwKVE8fNJecJMC3nMiF6llryAO7LJx3aEybaiDw2lWGXH/QGg4tPsx6kSFkpbCFHb3Ta4t2PW48wUL8P0DWe8prjtEQeEwoOqpjmE3vNStRycEktYkJY1jXZvFDwLOp0ZCfZJQGoRUSqYT/TTZDdHYtp7K2LWSSxjPon6/y+MzE6uwEDWzVlf6qNO/UF7Hiv7qz10Yez4KUI/jfdLfdhA3YPtlyygh7MNh0lBYBercTbJ0yYtdzZstTHqON8iR/Asi1jsiMV0wbTPPZFJJPp8tkmjjw2hNzVyLym1U/Q8OnTafSo0O5D2MRfCNM/6XdTkboetp5VW5lvK7iyIXgIsSdNX6vO0ULDVi52ToDXNbToQa7EO7/NpAC+gTFzYhu7YqkU7tVK+4hDlvv39NwkJQG0FqgHSuzguamvnqqTDMIbJU1sZjbTVC3M1MOe99HYoqoGmwIdd6c6BaHK52wtvDPapS6DWlic6KxKPbPiCGlqXW6xCm0cX9VclrrCsMWwcxGRoNcfIb2qjZ0VchwqmuzK2U5dDhUWJPmJ8sUJtgnFwmBj27XigWN/7uuVDYL9Hi4w8CYAHiSdr+bst4ZMww37uF1KvmdAO1ZpDgujA4BdiehhxQ8XGi6sLOnFcLI=
  - secure: nHCkSwSenWq66fMx7ANzhrWB+/lhy864i5wCum35xhMDJV+JJTG5ecc8hcLGES6vo9xHRqtahUewkrF5X/MMnqJN769IHwezOJIC8EkaQftYM+l4hYYdAh/+eIt8eVu/ubnGwXWdAphxyjubQZNIcUiO1GLf3XWuNqbApI83NakwyfL0d10SZgSC5AdFK5DHRNVzJmkvmblY3ITnkz5iAJ95yoI2rmRFN4yPZtcGxKknMyyH5jMJXee4Qvgppti6iL5DWrQZE91h9Eg/tSyQL8ZzmQ+QHTAJHHc4gTbW6Ubwu+hjIG2IK5e0P0SPvHMeyQklAxw+BAfjJXo4dd2/LO+OJy1pnHVOOTSzLynPSNKYFD4VQ1E33KtO3exuBJrOo/0btDpOea0TF21e+6Zchy5UlOb93kAo3PkfTvLg+CxDfjjrAezl0cq6VOJ+Hv+1UwaYczQXcp2ja1lPpJVFUhC/B3aDMBY3mgr3rBqQEK+3yM+ncZhJAN49nOtn2vHgxOM4YKwP/+SUrqcUsKpAlSoiPpGrmqZZjhT5XhSoaeiA5gJkXT57NhCBJVPEpYz9h3Shrvp275KGAaZBixwXxlh7JTzsgbvFkf5xnbPgpS5Mlga9f8LGDjOUMF6CTKkzq5bGMiXogtjS2hGUdiJVcV2CKrT4QKfGRHBDnN3Hy4U=
  - secure: jGE05qZadiw0pzuhOQuDPuf6FOflXS6mI3e/+975yxPv6f7GdCNY8dc/NBCfqwAmvhnUSl4Xioj23ma/TzZPOStTaCX0QHF5qxKjjNZhfH4y/A1hC80YpXwt8J+wK4rdyql8L2I0vZWp9lnsuwMoDp8QoXLUZ+pCHPHjq5mwKA1iyKWixfeBHF7+myU402pjALCrTpZW52s80OpO+tmPCj3OoCiAzkNgx8m3W52IKx7WWDluoljuoHPjOdHJmaGtL8G0iQc5FlYE0gmWfWnprWsDXiS5VRtNChA2Ouh53FyD1dTcQJEZ0dhrh8InBO5tA6GO+ZetHxX0rwy/vESh693etAJ0nOaVoyUrR7iVkZrIJXBTox6iueE9TDBmwDqxGt/4HyJoZFrVUoEO7QBP899ozLacuX7/k1l8U8qfJcP6WIyDrEgvR5xAnXJqZ/ebcVZF/tTAuatIfbhCQrh6d37mvj7m0lpJhYZn3CUOnNGwXeHt4ko9SMC/X7A9hZqJoldPiiurOhvTE9VEunHz5yxgNelq+Hrq98QYihIfz4SmWNRF9yp7CWPLrqBWP61JsX9lsL8l8GIChlef858Pkysgl77nR2pG00dRWcR8s2vXY3I9s83eIY51gbkdwz+FttJKgMLAcvfEssBJJ7dYfY0DEaJYTMrp/+EDt2j3u74=
  - secure: hvb2bIeiFBDM1z/0vuyCRFgXlYVfYolR1Kjhhr0l4jbcSEtSqTLjrXPZL2eL1txXXU2bjNRZSPdkzs5fYi/u4tJ7HdOYTKEjJpYEXXrU+YO9G1AFgjGAu9ftnpnbreqzrCK45AHXgRojvmD13HphdNFMLr08nA1EAmNNH0140ZdI7Kz0EpaoCvgXAn3HwyYkkUH4RDgDBdghOVoxwavPeWoVxA3g7tgvNB7jZAgjAsTs/wCh+TZqxCIMZt5ZX/R8c6fCGQwx0tUef5cut2Wg8nyYz0Wv1CEpQJG70QMcz4x+i/SNqQLReXXR84beUQCyCySaPYF3FlV0ya85sbZlXAe4OZQZ37XW/19s5t6Pxw/sAzkE+6XBfTeviNedM5VgEtmCU/1ePfVxqJqFdl7dqxqgx+fsQUxhKbauTosQ+DS8z41CuqTd6dYl22UK8PgkE0rJ5bjS8aFvmkMEFSVT7DmvStkZvNDpanas0h4hFifztQDTM321mjOYJAnXk8FPsAc5h6KQOQ92j1S0WO9vgxJGiIP3Da7N1F2vzUENSbaQPSLobLuWg9WGk2iRBhAexLre9RwbjAEdIPq5yCcQMJrd6QX7BhhMlDEDT+hZr2+8aiPVt443H0BJ6lr2eRWbeTEVaF4gfpFqv+Mnfj/SIWc+rmLNYQpZzoB2tn7noQ4=
  - secure: TUlkf8sMQm7LntQUTH9Jagl0uGZVjhmEwDAMRdn/lsGKZzwWS1z9ExT5HVSPerXdegi84+cTNkWTxmzhNC2p9FA4uSwxjx66uQnwV+t9JPkrTQEV3px59ztynI6vg4AbLotlkXfNwSOc1jIvCL8/AMM2mQSbU+bU55pr/cjynCsTYfIMKchNxXVuVXz6wnRe6LziYniJ3WJmuPKCOSBur7ZiSieJl2aWWA5g89u+gZ5vN9yF1SOIrqD255kzAu4JYIYGEmq7XltUEMt1ww1LBXA11jAzq/Oi6KxkavcT2ktK9mywTAcrgRSnHf9esr8c9Tmq31Zfq+PFN73BWoGUlhe2CSz+xGrZPo/ZxdLUTsFKy5LVb/+loYBCNoHto3/UbY27IKGUYl5oPiEL6ixEWIq1WSHKV0g7RRwEJ32yuOG7OB0MUjH0d2iwew8XkLQrdxHkBwTFlLyXvfZU/yb+izzfzdfWbyvVn1zkgrf5r6soeCVQ8XkrNByAq+pOwQDLMQELcXsc8SrwrSRdE0zAovOxb3ZGwj6VbApGraj1vqFtUXZ5sChhT57ptOHLcEJvKX5hwNwC6dGxzZhczRadq2cZeopBfMuI4GlC0MqIw6VngwTA6djN17cnNbmOtjF+SM2grTP5GAJc0NbKp7wiV/5cL2OHuwMyUp0bGvuz7Z8=
  - secure: IAP8I7ZjJZuYC7rUAqLhCGgreXoFOYY1C2kdRGZKlLFQvcgpG9912a/l/5JQAItxTdIpxHMc6ocBqwlMDSvFsjTjlQGfz/qawkeIAlGMy7u12e43kVxVJjhJmnYNzTnWhyxq/48hx0vHjHASvBoqj6gIH1qyeN4YXIeIuCpbA1o7LqWpQUMQgSMqW1i4YRpGTkvVwdPCEqaWbzVXkEyQ9MZta4n72Vrybjyl6rPcLVfXVxm6A/ADHa1Kpu/EZeCzvT6ENEvaxtrF6JvXyb7xtKS2O2lmgAEl1eoOZqu1FdQXR2lFz6A1X5i7r6G0fBGrLZsuTa46p37w16lPYirykmCXki2/E+n3I8rOecDd4OlfIvMygkcjvXy3bgJ/AJUfaxy1osnLbC7K1Xf531d7xrT1DSRCEpTTd/CWbyrrDEShPo2HbboM4P2l3eYCHg4KGcQkBclgjLUq3gV+sOSuKUK1yK3F9IdWPtzLhfWLycw025Ut0bHqLoJIvWsfgI7S8qZ8ovGdjowRKLf2BNqHx2emyAYe8+ek4BIuEYbWz2UDvO0i4nZfvFFWokETxRLZuDWys94bo7+8mUUc/d8aK11ORRm/WFPrtlMTdvjx3tGoa4tCIgHnXHr6AcX4kadbD6+2uarav7lmA23hX5bILl3v/fNuz6u8Nrg9TtzwhK0=
services:
- docker
before_install:
- echo "$GITHUB_TOKEN" > .github.token
- pip install awscli
- docker-compose build
- docker-compose up -d
script:
- docker ps -a
- "./test.sh"
after_success:
- "./deploy.sh"
